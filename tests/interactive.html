<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="tests/style.css"/>
  <title>Reactivity Test</title>
</head>
<body>
  <h1>Reactivity test - IIFE</h1>

  <p>This is an example of dynamic text! The current store value is: <span data-mfBind="store1->innerText">Here is a default value.</span></p>
  <p>Here is text that can be HTML: <span data-mfBind="store1->innerHTML">Here is a default value.</span></p>
  <p>Store 2 nested: <span data-mfBind="store2.values[1]->innerHTML">Here is a default value.</span></p>
  <p>Checkbox set to checked? <span data-mfBind="store2.values[0]->innerText"></span></p>
  <p>Store 4 value: <span data-mfBind="store4->innerText"></span></p>
  <p>Checked store checked? <span data-mfBind="checkedStore-> innerText">Unknown</span></p>
  <p>Value of Mass Store 99: <span data-mfBind="mass_store99 -> innerText">Unknown</span></p>
  <div data-secret="THIS IS A SECRET" data-mfSync="on($mount) sendAlert(data-secret) -> checkedStore"></div>

  <!-- Content -->
  <div class="sync-grid">
    <label>On keyup:</label> <input data-mfBind="store1->value" data-mfSync="on(keyup, change) value -> store1">
    <label>Bind only:</label> <input data-mfBind="store1->value">
    <label for="cb">Sync checkbox:</label> <input id="cb" type="checkbox" data-mfBind="store1->checked" data-mfSync="on(change) checked->checkedStore">
    <label for="cb2">Bind checkbox:</label> <input id="cb2" type="checkbox" data-mfBind="isChecked(store1)->checked">

    <!-- Select (with dynamic options) -->
    <label>Dyn select</label>
    <select data-mfBind="store1->value" data-mfSync="on(change) value->store1">
      <!-- Dynamic frontend replace -->
      <template id="select-ops" data-mfeach="store1 as letter, index">
        <!-- Dynamic options -->
        <option value="${letter}">${index}: ${letter}</option>
      </template>

      <!-- Default / fallback options (replaced if dynamic options work) -->
      <mfdefault data-mftemplate="select-ops">
        <option value="" default>Blank</option>
        <option value="My text">Initial Value</option>
        <option value="<span class='colorful'>Another update</span>">Show update text</option>
        <option value="We're at 4k">Show 4k text</option>
      </mfdefault>

      <!-- Always-present options -->
      <option value="Last one">Last one</option>
    </select>

    <label>Dyn div</label>
    <mfdefault data-mfif="showDiv(store1)">
      Div is shown.
    </mfdefault>
    <template data-mfelse-if="showDiv(store1)">Else if</template>
    <template data-mfelse>Else</template>
  </div>

  <div class="special-insert">Default insert</div>
  <nav data-mfGet="on($mount) /tests/header.html -> (header>this, .special>.special-insert)" data-mfmethod="GET" data-mfoverrides='{ "allowScripts": true }'></nav>

  <div class="trans" data-mfBind="specialStyling(store1)"></div>

  <!-- Store script -->
  <script src="../dist/mfld.js" type="module"></script>
  <script src="./tests/interactive.js" defer></script>
</body>
</html>

<style>
  body {
    overflow-x: hidden;
    overflow-y: scroll;
  }

  nav {
    /* background: blue; */
    padding: 1rem;
  }

  .data-mftrans {
    transition-property: transform, opacity;
    transform: translateX(0);
    opacity: 1;
  }

  .data-mftrans.out {
    transform: translateX(-50%);
    opacity: 0;
  }

  .data-mftrans.in {
    transform: translateX(50%);
    opacity: 0;
  }
</style>