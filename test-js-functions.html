<!DOCTYPE html>
<html>
	<head>
		<title>JavaScript Functions Test</title>
		<script type="module">
			import { State, RegisteredElement } from "./src/index.ts";

			// Test JavaScript function support in different attributes
			const testData = new State({ count: 0 });

			const container = document.getElementById("container");

			// Test data-bind with JavaScript arrow function
			const bindTest = document.createElement("div");
			bindTest.dataset.bind =
				'textContent: () => "JavaScript function works!"';
			container.appendChild(bindTest);
			RegisteredElement.register(bindTest, { testData });

			// Test data-bind with regular JavaScript function
			const bindTest2 = document.createElement("div");
			bindTest2.dataset.bind =
				'textContent: function() { return "Regular function works!"; }';
			container.appendChild(bindTest2);
			RegisteredElement.register(bindTest2, { testData });

			// Show that it still works with State references
			const stateTest = document.createElement("div");
			stateTest.dataset.bind = 'textContent: "Count: " + @testData.count';
			container.appendChild(stateTest);
			RegisteredElement.register(stateTest, { testData });

			// Update count to verify State binding still works
			setTimeout(() => {
				testData.count = 42;
			}, 1000);
		</script>
	</head>
	<body>
		<h1>JavaScript Functions in All Attributes Test</h1>
		<div id="container"></div>
	</body>
</html>
