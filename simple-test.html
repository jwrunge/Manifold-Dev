<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Simple Manifold Test</title>
		<style>
			body {
				font-family: system-ui, -apple-system, sans-serif;
				max-width: 600px;
				margin: 0 auto;
				padding: 2rem;
				line-height: 1.6;
			}

			button {
				background: #007acc;
				color: white;
				border: none;
				padding: 0.5rem 1rem;
				border-radius: 4px;
				cursor: pointer;
				margin: 0.5rem 0.5rem 0.5rem 0;
			}

			button:hover {
				background: #005a9e;
			}

			.section {
				background: #f5f5f5;
				padding: 1rem;
				margin: 1rem 0;
				border-radius: 4px;
			}
		</style>
	</head>
	<body>
		<h1>Simple Manifold Test</h1>

		<div class="section">
			<h3>Basic Conditional</h3>
			<div data-if="@isVisible">This text should show/hide</div>
			<button onclick="toggleVisibility()">Toggle Visibility</button>
		</div>

		<div class="section">
			<h3>Counter</h3>
			<div data-if="@count >= 0">
				Count: <span id="count-display"></span>
			</div>
			<button onclick="increment()">+</button>
			<button onclick="decrement()">-</button>
		</div>

		<script type="module">
			import Manifold from "./src/index.js";

			console.log("Manifold object:", Manifold);

			// Create simple state
			const simpleState = Manifold.$.create({
				isVisible: true,
				count: 0,
			});

			console.log("Created state:", simpleState);

			// Global functions for buttons
			window.toggleVisibility = function () {
				simpleState.isVisible.value = !simpleState.isVisible.value;
				console.log(
					"Visibility toggled to:",
					simpleState.isVisible.value
				);
			};

			window.increment = function () {
				simpleState.count.value++;
				document.getElementById("count-display").textContent =
					simpleState.count.value;
				console.log("Count:", simpleState.count.value);
			};

			window.decrement = function () {
				simpleState.count.value--;
				document.getElementById("count-display").textContent =
					simpleState.count.value;
				console.log("Count:", simpleState.count.value);
			};

			// Initialize display
			document.getElementById("count-display").textContent =
				simpleState.count.value;

			// Initialize Manifold
			console.log("Initializing Manifold...");
			try {
				Manifold.init();
				console.log("Manifold initialized successfully");
			} catch (error) {
				console.error("Error initializing Manifold:", error);
			}
		</script>
	</body>
</html>
